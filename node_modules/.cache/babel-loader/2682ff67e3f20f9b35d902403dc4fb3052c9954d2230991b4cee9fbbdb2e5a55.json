{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useParams,useNavigate}from'react-router-dom';import'../styles/EventsPage.css';import{fetchEventsByYear}from'../services/api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function YearEventsPage(){const{year}=useParams();const navigate=useNavigate();const[events,setEvents]=useState([]);const[isLoading,setIsLoading]=useState(true);const[error,setError]=useState(null);useEffect(()=>{const loadEvents=async()=>{try{setIsLoading(true);const data=await fetchEventsByYear(year);setEvents(data);setError(null);}catch(error){console.error(\"\\u52A0\\u8F7D\".concat(year,\"\\u5E74\\u4E8B\\u4EF6\\u5931\\u8D25:\"),error);setError('无法加载事件数据，请稍后再试');}finally{setIsLoading(false);}};loadEvents();},[year]);const handlePersonClick=personId=>{navigate(\"/timeline/\".concat(personId));};if(isLoading){return/*#__PURE__*/_jsx(\"div\",{className:\"loading-container\",children:\"\\u6B63\\u5728\\u52A0\\u8F7D\\u6570\\u636E...\"});}if(error){return/*#__PURE__*/_jsxs(\"div\",{className:\"error-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"back-button\",onClick:()=>navigate('/'),children:\"\\u8FD4\\u56DE\\u9996\\u9875\"}),/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:error})]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"events-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"events-header\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"back-button\",onClick:()=>navigate('/'),children:\"\\u8FD4\\u56DE\\u9996\\u9875\"}),/*#__PURE__*/_jsxs(\"h1\",{className:\"events-title\",children:[year,\"\\u5E74\\u53D1\\u751F\\u7684\\u4E8B\\u4EF6\"]})]}),events.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"no-events\",children:\"\\u8FD9\\u4E00\\u5E74\\u6CA1\\u6709\\u8BB0\\u5F55\\u4E8B\\u4EF6\"}):/*#__PURE__*/_jsx(\"div\",{className:\"events-list\",children:events.map((person,personIndex)=>/*#__PURE__*/_jsxs(\"div\",{className:\"events-person-group\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"events-person-name\",onClick:()=>handlePersonClick(person.personId),children:[person.personName,\" (\",year-person.birthYear,\"\\u5C81)\"]}),person.experiences.map((experience,expIndex)=>/*#__PURE__*/_jsxs(\"div\",{className:\"events-item\",children:[/*#__PURE__*/_jsx(\"h3\",{children:experience.title}),/*#__PURE__*/_jsx(\"p\",{children:experience.description})]},expIndex))]},personIndex))})]});}export default YearEventsPage;","map":{"version":3,"names":["React","useState","useEffect","useParams","useNavigate","fetchEventsByYear","jsx","_jsx","jsxs","_jsxs","YearEventsPage","year","navigate","events","setEvents","isLoading","setIsLoading","error","setError","loadEvents","data","console","concat","handlePersonClick","personId","className","children","onClick","length","map","person","personIndex","personName","birthYear","experiences","experience","expIndex","title","description"],"sources":["/Users/zeta/Documents/years_web/src/pages/YearEventsPage.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport '../styles/EventsPage.css';\nimport { fetchEventsByYear } from '../services/api';\n\nfunction YearEventsPage() {\n  const { year } = useParams();\n  const navigate = useNavigate();\n  const [events, setEvents] = useState([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    const loadEvents = async () => {\n      try {\n        setIsLoading(true);\n        const data = await fetchEventsByYear(year);\n        setEvents(data);\n        setError(null);\n      } catch (error) {\n        console.error(`加载${year}年事件失败:`, error);\n        setError('无法加载事件数据，请稍后再试');\n      } finally {\n        setIsLoading(false);\n      }\n    };\n\n    loadEvents();\n  }, [year]);\n\n  const handlePersonClick = (personId) => {\n    navigate(`/timeline/${personId}`);\n  };\n\n  if (isLoading) {\n    return <div className=\"loading-container\">正在加载数据...</div>;\n  }\n\n  if (error) {\n    return (\n      <div className=\"error-container\">\n        <div className=\"back-button\" onClick={() => navigate('/')}>\n          返回首页\n        </div>\n        <div className=\"error-message\">{error}</div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"events-container\">\n      <div className=\"events-header\">\n        <div className=\"back-button\" onClick={() => navigate('/')}>\n          返回首页\n        </div>\n        <h1 className=\"events-title\">{year}年发生的事件</h1>\n      </div>\n      \n      {events.length === 0 ? (\n        <div className=\"no-events\">这一年没有记录事件</div>\n      ) : (\n        <div className=\"events-list\">\n          {events.map((person, personIndex) => (\n            <div key={personIndex} className=\"events-person-group\">\n              <div className=\"events-person-name\" onClick={() => handlePersonClick(person.personId)}>\n                {person.personName} ({year - person.birthYear}岁)\n              </div>\n              {person.experiences.map((experience, expIndex) => (\n                <div key={expIndex} className=\"events-item\">\n                  <h3>{experience.title}</h3>\n                  <p>{experience.description}</p>\n                </div>\n              ))}\n            </div>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default YearEventsPage; "],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,OAASC,SAAS,CAAEC,WAAW,KAAQ,kBAAkB,CACzD,MAAO,0BAA0B,CACjC,OAASC,iBAAiB,KAAQ,iBAAiB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEpD,QAAS,CAAAC,cAAcA,CAAA,CAAG,CACxB,KAAM,CAAEC,IAAK,CAAC,CAAGR,SAAS,CAAC,CAAC,CAC5B,KAAM,CAAAS,QAAQ,CAAGR,WAAW,CAAC,CAAC,CAC9B,KAAM,CAACS,MAAM,CAAEC,SAAS,CAAC,CAAGb,QAAQ,CAAC,EAAE,CAAC,CACxC,KAAM,CAACc,SAAS,CAAEC,YAAY,CAAC,CAAGf,QAAQ,CAAC,IAAI,CAAC,CAChD,KAAM,CAACgB,KAAK,CAAEC,QAAQ,CAAC,CAAGjB,QAAQ,CAAC,IAAI,CAAC,CAExCC,SAAS,CAAC,IAAM,CACd,KAAM,CAAAiB,UAAU,CAAG,KAAAA,CAAA,GAAY,CAC7B,GAAI,CACFH,YAAY,CAAC,IAAI,CAAC,CAClB,KAAM,CAAAI,IAAI,CAAG,KAAM,CAAAf,iBAAiB,CAACM,IAAI,CAAC,CAC1CG,SAAS,CAACM,IAAI,CAAC,CACfF,QAAQ,CAAC,IAAI,CAAC,CAChB,CAAE,MAAOD,KAAK,CAAE,CACdI,OAAO,CAACJ,KAAK,gBAAAK,MAAA,CAAMX,IAAI,oCAAUM,KAAK,CAAC,CACvCC,QAAQ,CAAC,gBAAgB,CAAC,CAC5B,CAAC,OAAS,CACRF,YAAY,CAAC,KAAK,CAAC,CACrB,CACF,CAAC,CAEDG,UAAU,CAAC,CAAC,CACd,CAAC,CAAE,CAACR,IAAI,CAAC,CAAC,CAEV,KAAM,CAAAY,iBAAiB,CAAIC,QAAQ,EAAK,CACtCZ,QAAQ,cAAAU,MAAA,CAAcE,QAAQ,CAAE,CAAC,CACnC,CAAC,CAED,GAAIT,SAAS,CAAE,CACb,mBAAOR,IAAA,QAAKkB,SAAS,CAAC,mBAAmB,CAAAC,QAAA,CAAC,yCAAS,CAAK,CAAC,CAC3D,CAEA,GAAIT,KAAK,CAAE,CACT,mBACER,KAAA,QAAKgB,SAAS,CAAC,iBAAiB,CAAAC,QAAA,eAC9BnB,IAAA,QAAKkB,SAAS,CAAC,aAAa,CAACE,OAAO,CAAEA,CAAA,GAAMf,QAAQ,CAAC,GAAG,CAAE,CAAAc,QAAA,CAAC,0BAE3D,CAAK,CAAC,cACNnB,IAAA,QAAKkB,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAET,KAAK,CAAM,CAAC,EACzC,CAAC,CAEV,CAEA,mBACER,KAAA,QAAKgB,SAAS,CAAC,kBAAkB,CAAAC,QAAA,eAC/BjB,KAAA,QAAKgB,SAAS,CAAC,eAAe,CAAAC,QAAA,eAC5BnB,IAAA,QAAKkB,SAAS,CAAC,aAAa,CAACE,OAAO,CAAEA,CAAA,GAAMf,QAAQ,CAAC,GAAG,CAAE,CAAAc,QAAA,CAAC,0BAE3D,CAAK,CAAC,cACNjB,KAAA,OAAIgB,SAAS,CAAC,cAAc,CAAAC,QAAA,EAAEf,IAAI,CAAC,sCAAM,EAAI,CAAC,EAC3C,CAAC,CAELE,MAAM,CAACe,MAAM,GAAK,CAAC,cAClBrB,IAAA,QAAKkB,SAAS,CAAC,WAAW,CAAAC,QAAA,CAAC,wDAAS,CAAK,CAAC,cAE1CnB,IAAA,QAAKkB,SAAS,CAAC,aAAa,CAAAC,QAAA,CACzBb,MAAM,CAACgB,GAAG,CAAC,CAACC,MAAM,CAAEC,WAAW,gBAC9BtB,KAAA,QAAuBgB,SAAS,CAAC,qBAAqB,CAAAC,QAAA,eACpDjB,KAAA,QAAKgB,SAAS,CAAC,oBAAoB,CAACE,OAAO,CAAEA,CAAA,GAAMJ,iBAAiB,CAACO,MAAM,CAACN,QAAQ,CAAE,CAAAE,QAAA,EACnFI,MAAM,CAACE,UAAU,CAAC,IAAE,CAACrB,IAAI,CAAGmB,MAAM,CAACG,SAAS,CAAC,SAChD,EAAK,CAAC,CACLH,MAAM,CAACI,WAAW,CAACL,GAAG,CAAC,CAACM,UAAU,CAAEC,QAAQ,gBAC3C3B,KAAA,QAAoBgB,SAAS,CAAC,aAAa,CAAAC,QAAA,eACzCnB,IAAA,OAAAmB,QAAA,CAAKS,UAAU,CAACE,KAAK,CAAK,CAAC,cAC3B9B,IAAA,MAAAmB,QAAA,CAAIS,UAAU,CAACG,WAAW,CAAI,CAAC,GAFvBF,QAGL,CACN,CAAC,GATML,WAUL,CACN,CAAC,CACC,CACN,EACE,CAAC,CAEV,CAEA,cAAe,CAAArB,cAAc","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}