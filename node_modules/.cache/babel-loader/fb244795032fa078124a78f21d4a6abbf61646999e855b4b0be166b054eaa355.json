{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useParams,useNavigate}from'react-router-dom';import'../styles/TimelinePage.css';import{fetchPersonById}from'../services/api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function TimelinePage(){const{id}=useParams();const navigate=useNavigate();const[person,setPerson]=useState(null);const[isLoading,setIsLoading]=useState(true);const[error,setError]=useState(null);useEffect(()=>{const loadPersonData=async()=>{try{setIsLoading(true);const data=await fetchPersonById(id);setPerson(data);setError(null);}catch(error){console.error('加载人物详情失败:',error);setError('无法加载人物数据，请稍后再试');}finally{setIsLoading(false);}};loadPersonData();},[id]);const handleYearClick=year=>{navigate(\"/year/\".concat(year));};const handleAgeClick=year=>{if(person){const age=year-person.birthYear;navigate(\"/age/\".concat(age));}};if(isLoading){return/*#__PURE__*/_jsx(\"div\",{className:\"loading-container\",children:\"\\u6B63\\u5728\\u52A0\\u8F7D\\u6570\\u636E...\"});}if(error||!person){return/*#__PURE__*/_jsxs(\"div\",{className:\"error-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"back-button\",onClick:()=>navigate('/'),children:\"\\u8FD4\\u56DE\\u9996\\u9875\"}),/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:error||'人物未找到'})]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"timeline-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"timeline-header\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"back-button\",onClick:()=>navigate('/'),children:\"\\u8FD4\\u56DE\\u9996\\u9875\"}),/*#__PURE__*/_jsxs(\"h1\",{className:\"timeline-title\",children:[person.name,\"\\u7684\\u4EBA\\u751F\\u8F68\\u8FF9\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"timeline\",children:person.experiences.map((experience,index)=>{const age=experience.year-person.birthYear;return/*#__PURE__*/_jsxs(\"div\",{className:\"timeline-item\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"timeline-left\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"timeline-year\",onClick:()=>handleYearClick(experience.year),children:[experience.year,/*#__PURE__*/_jsx(\"span\",{className:\"timeline-year-small\",children:\"\\u5E74\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"timeline-age\",onClick:()=>handleAgeClick(experience.year),children:[age,/*#__PURE__*/_jsx(\"span\",{className:\"timeline-age-small\",children:\"\\u5C81\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"timeline-right\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"timeline-event\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"timeline-event-title\",children:experience.title}),/*#__PURE__*/_jsx(\"p\",{className:\"timeline-event-desc\",children:experience.description})]})})]},index);})})]});}export default TimelinePage;","map":{"version":3,"names":["React","useState","useEffect","useParams","useNavigate","fetchPersonById","jsx","_jsx","jsxs","_jsxs","TimelinePage","id","navigate","person","setPerson","isLoading","setIsLoading","error","setError","loadPersonData","data","console","handleYearClick","year","concat","handleAgeClick","age","birthYear","className","children","onClick","name","experiences","map","experience","index","title","description"],"sources":["/Users/zeta/Documents/years_web/src/pages/TimelinePage.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport '../styles/TimelinePage.css';\nimport { fetchPersonById } from '../services/api';\n\nfunction TimelinePage() {\n  const { id } = useParams();\n  const navigate = useNavigate();\n  const [person, setPerson] = useState(null);\n  const [isLoading, setIsLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    const loadPersonData = async () => {\n      try {\n        setIsLoading(true);\n        const data = await fetchPersonById(id);\n        setPerson(data);\n        setError(null);\n      } catch (error) {\n        console.error('加载人物详情失败:', error);\n        setError('无法加载人物数据，请稍后再试');\n      } finally {\n        setIsLoading(false);\n      }\n    };\n\n    loadPersonData();\n  }, [id]);\n\n  const handleYearClick = (year) => {\n    navigate(`/year/${year}`);\n  };\n\n  const handleAgeClick = (year) => {\n    if (person) {\n      const age = year - person.birthYear;\n      navigate(`/age/${age}`);\n    }\n  };\n\n  if (isLoading) {\n    return <div className=\"loading-container\">正在加载数据...</div>;\n  }\n\n  if (error || !person) {\n    return (\n      <div className=\"error-container\">\n        <div className=\"back-button\" onClick={() => navigate('/')}>\n          返回首页\n        </div>\n        <div className=\"error-message\">{error || '人物未找到'}</div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"timeline-container\">\n      <div className=\"timeline-header\">\n        <div className=\"back-button\" onClick={() => navigate('/')}>\n          返回首页\n        </div>\n        <h1 className=\"timeline-title\">{person.name}的人生轨迹</h1>\n      </div>\n      <div className=\"timeline\">\n        {person.experiences.map((experience, index) => {\n          const age = experience.year - person.birthYear;\n          return (\n            <div key={index} className=\"timeline-item\">\n              <div className=\"timeline-left\">\n                <div className=\"timeline-year\" onClick={() => handleYearClick(experience.year)}>\n                  {experience.year}\n                  <span className=\"timeline-year-small\">年</span>\n                </div>\n                <div className=\"timeline-age\" onClick={() => handleAgeClick(experience.year)}>\n                  {age}\n                  <span className=\"timeline-age-small\">岁</span>\n                </div>\n              </div>\n              <div className=\"timeline-right\">\n                <div className=\"timeline-event\">\n                  <h3 className=\"timeline-event-title\">{experience.title}</h3>\n                  <p className=\"timeline-event-desc\">{experience.description}</p>\n                </div>\n              </div>\n            </div>\n          );\n        })}\n      </div>\n    </div>\n  );\n}\n\nexport default TimelinePage; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}